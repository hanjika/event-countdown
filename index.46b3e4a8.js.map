{"mappings":"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","sources":["src/js/time.js","src/js/periods.js","src/js/remove.js","src/js/display.js","src/js/create.js","src/js/check.js","src/js/index.js","src/js/refresh.js"],"sourcesContent":["export function timeUntilEvent(date) {\r\n    const now = new Date();\r\n    const eventDate = new Date(date);\r\n\r\n    return eventDate.getTime() - now.getTime();\r\n}","export const PERIODS = [\r\n    {\r\n        name: 'week',\r\n        value: 86400000 * 7\r\n    },\r\n    {\r\n        name: 'day',\r\n        value: 86400000\r\n    },\r\n    {\r\n        name: 'hour',\r\n        value: 3600000\r\n    },\r\n    {\r\n        name: 'minute',\r\n        value: 60000\r\n    }\r\n]","let allStoredEvents = JSON.parse(localStorage.getItem('allStoredEvents'));\r\n\r\nexport function removeFromStorage(listItem) {\r\n    const id = listItem.id;\r\n    for (let i = 0; i < allStoredEvents.length; i++) {\r\n        if (allStoredEvents[i].Event === id) {\r\n            allStoredEvents.splice(i, 1);\r\n            localStorage.setItem('allStoredEvents', JSON.stringify(allStoredEvents));\r\n        }\r\n    }\r\n}\r\n\r\nexport function removeEvent(listItem) {\r\n    document.querySelector('.list-of-events').removeChild(listItem);\r\n    removeFromStorage(listItem);\r\n}","import { PERIODS } from './periods';\r\nimport { createLiButton } from './create';\r\n\r\nlet periodsRequired;\r\n\r\nexport function displayEvent(timestamp, listItem, event) {\r\n    fromNow(timestamp, listItem);\r\n    listItem.innerText += ' until ' + event;\r\n}\r\n\r\nfunction fromNow(timestamp, listItem) {\r\n    const resultArr = [];\r\n\r\n    for (let i = 0; i < PERIODS.length; i++) {\r\n        while (timestamp >= PERIODS[i].value) {\r\n            resultArr.push(PERIODS[i].name);\r\n            timestamp -= PERIODS[i].value;\r\n        }\r\n    }\r\n    const resultFormatted = checkDuplicate(resultArr);\r\n    printTime(resultFormatted, listItem);\r\n}\r\n\r\nfunction checkDuplicate(array) {\r\n    let weeks = 0;\r\n    let days = 0;\r\n    let hours = 0;\r\n    let minutes = 0;\r\n    let seconds = 0;\r\n    let milliseconds = 0;\r\n    const condensed = [];\r\n\r\n    for (const period of array) {\r\n        if (period === 'week') {\r\n            weeks++;\r\n        } else if (period === 'day') {\r\n            days++;\r\n        } else if (period === 'hour') {\r\n            hours++;\r\n        } else if (period === 'minute') {\r\n            minutes++;\r\n        }\r\n    }\r\n    condensed.push(weeks, days, hours, minutes, seconds, milliseconds);\r\n    return arrayWithoutZero(condensed);\r\n}\r\n\r\nfunction arrayWithoutZero(array) {\r\n    periodsRequired = [];\r\n\r\n    for (const period of PERIODS) {\r\n        periodsRequired.push(period);\r\n    }\r\n\r\n    for (let i = 0; i < array.length; i++) {\r\n        while (array[i] === 0) {\r\n            array.splice(i, 1);\r\n            periodsRequired.splice(i, 1);\r\n        }\r\n    }\r\n    return array;\r\n}\r\n\r\n\r\nfunction printTime(finalArray, listItem) {\r\n    const numOfPeriod = finalArray.length;\r\n\r\n    for (let i = 0; i < finalArray.length; i++) {\r\n        if (numOfPeriod > 1 && numOfPeriod === i + 1) {\r\n            listItem.innerText += ' and';\r\n        } else if (numOfPeriod > 1 && i > 0) {\r\n            listItem.innerText += ',';\r\n        }\r\n        listItem.innerText += ' ' + finalArray[i] + ' ' + periodsRequired[i].name;\r\n        if (finalArray[i] > 1) {\r\n            listItem.innerText += 's';\r\n        }\r\n    }\r\n}\r\n\r\nexport function displayNewTimes(timestamp, event) {\r\n    const storedEventLi = document.getElementById(event);\r\n\r\n    storedEventLi.innerText = '';\r\n    \r\n    displayEvent(timestamp, storedEventLi, event)\r\n\r\n    createLiButton(storedEventLi);\r\n}","import { displayEvent } from \"./display\";\r\nimport { removeEvent } from \"./remove\";\r\n\r\nexport function createLi(event) {\r\n    const listItem = document.createElement('li');\r\n    listItem.setAttribute('id', event);\r\n    listItem.setAttribute('draggable', true);\r\n\r\n    listItem.addEventListener('dragstart', dragLiStart);\r\n    listItem.addEventListener('dragend', dragLiEnd);\r\n\r\n    document.querySelector('.list-of-events').appendChild(listItem);\r\n    \r\n    return listItem;\r\n}\r\n\r\nexport function createLiButton(listItem) {\r\n    const deleteButton = document.createElement('button');\r\n    deleteButton.innerText = 'Ã—';\r\n    listItem.appendChild(deleteButton);\r\n\r\n    deleteButton.addEventListener('click', () => {\r\n        removeEvent(listItem);\r\n    });\r\n}\r\n\r\nexport function makeEvent(timestamp, event) {\r\n    const listItem = createLi(event);\r\n    \r\n    displayEvent(timestamp, listItem, event);\r\n\r\n    createLiButton(listItem);\r\n}\r\n\r\nfunction dragLiStart(e) {\r\n    setTimeout(() => {\r\n        e.target.classList.add('invisible');\r\n    }, 0); \r\n}\r\n\r\nfunction dragLiEnd(e) {\r\n    e.target.classList.remove('invisible');\r\n}","import { removeEvent } from \"./remove\";\r\n\r\nexport function isFutureDate(timestamp, listItem) {\r\n    if (timestamp <= 0) {\r\n        removeEvent(listItem);\r\n    }\r\n}","import { timeUntilEvent } from './time';\r\n\r\nimport { \r\n    displayEvent\r\n} from './display';\r\n\r\nimport {\r\n    createLi,\r\n    createLiButton,\r\n    makeEvent\r\n} from './create';\r\n\r\nimport { isFutureDate } from './check';\r\n\r\nimport { refreshCountdown } from './refresh';\r\n\r\nlet allStoredEvents = JSON.parse(localStorage.getItem('allStoredEvents'));\r\nif (allStoredEvents !== null) {\r\n    for (const storedEvent of allStoredEvents) {\r\n        const listItem = createLi(storedEvent.Event);\r\n        \r\n        const timestamp = timeUntilEvent(storedEvent.Date);\r\n        isFutureDate(timestamp, listItem);\r\n\r\n        displayEvent(timestamp, listItem, storedEvent.Event)\r\n\r\n        createLiButton(listItem);\r\n    }\r\n\r\n} else {\r\n    allStoredEvents = [];\r\n}\r\n\r\nwindow.submitForm = function submitForm(form) {\r\n    const date = form.eventdate.value;\r\n\r\n    const timestamp = timeUntilEvent(date);\r\n    if (timestamp <= 0) {\r\n        alert('Event has already occurred so cannot be added to countdown list');\r\n    } else {\r\n        const event = form.eventname.value;\r\n\r\n        allStoredEvents.push({Event:event, Date:date});\r\n        localStorage.setItem('allStoredEvents', JSON.stringify(allStoredEvents));\r\n\r\n        makeEvent(timestamp, event);\r\n    }\r\n};\r\n\r\n/* Refresh dates every second */\r\n\r\nsetInterval(refreshCountdown, 1000);","import { timeUntilEvent } from \"./time\";\r\nimport { removeEvent } from \"./remove\";\r\nimport { displayNewTimes } from \"./display\";\r\n\r\nexport function refreshCountdown() {\r\n    const stored = JSON.parse(localStorage.getItem('allStoredEvents'));\r\n    if (stored !== null) {\r\n        for (let i = 0; i < stored.length; i++) {\r\n            let timestamp = timeUntilEvent(stored[i].Date);\r\n            if (timestamp <= 0) {\r\n                const listItem = document.getElementById(stored[i].Event);\r\n                removeEvent(listItem);\r\n            } else {\r\n                displayNewTimes(timestamp, stored[i].Event);\r\n            }\r\n        }\r\n    }   \r\n}"],"names":["$362e665a5c954dd8$export$aa0bfef5c01b2fe7","date","now","Date","getTime","$3d4fdad83bacf762$export$250100a662402f55","name","value","$aa5a245fb072c126$var$periodsRequired","$f6158bb5a4a003e4$var$allStoredEvents","JSON","parse","localStorage","getItem","$f6158bb5a4a003e4$export$b5ed465d99f3f1c3","listItem","document","querySelector","removeChild","id","i","length","Event","splice","setItem","stringify","$f6158bb5a4a003e4$export$a3e6e3b94afefd97","$092fa1546b5c1218$export$5c8f7bec9aa9905b","event","createElement","setAttribute","addEventListener","$092fa1546b5c1218$var$dragLiStart","$092fa1546b5c1218$var$dragLiEnd","appendChild","$092fa1546b5c1218$export$9964b7bc88d03c23","deleteButton","innerText","e","setTimeout","target","classList","add","remove","$aa5a245fb072c126$export$956e6b670203a8b9","timestamp","resultArr","push","finalArray","numOfPeriod","$aa5a245fb072c126$var$printTime","array","weeks","days","hours","minutes","seconds","milliseconds","condensed","period","$aa5a245fb072c126$var$arrayWithoutZero","$aa5a245fb072c126$var$checkDuplicate","$aa5a245fb072c126$var$fromNow","$aa5a245fb072c126$export$5dfdd9883010ca47","storedEventLi","getElementById","$e0b4a83989b855f3$export$3c3ec13c4ecfb550","$bef5d2f5c1cf49f6$var$allStoredEvents","storedEvent","window","submitForm","form","eventdate","alert","eventname","$092fa1546b5c1218$export$2f7b310570bee07a","setInterval","stored"],"version":3,"file":"index.46b3e4a8.js.map"}